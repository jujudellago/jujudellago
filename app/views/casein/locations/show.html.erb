<!-- Scaffolding generated by Casein v.3.1.7 Custom Yabo-concept -->
<%- page_title "View location" -%>
<%= semantic_form_for @location, :url => casein_location_path(@location)  do |f| %>			
		<%= render :partial => 'casein/locations/location_form', :locals => { :f => f } %>
<% end %>
<%= content_for :control_bar do %>
	<%= link_to( "Cancel", casein_locations_path ,:class=>'button_link').html_safe %>
<%- end -%>

<%= content_for :sidebar do%>
	<h1>Map preview</h1>
	<div class="center">
		<div id="map" style="width:350px;height:280px"></div>
	
	<%#= video_embed_code(@video,{:html5=>true,:width=>300,:height=>200}).html_safe %></div>
<% end %>

<%= content_for :head_js do %>
<script type="text/javascript" src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=<%= GOOGLEMAPS_API_KEY %>" ></script>

<script type="text/javascript" >
function initialize() { 
	if (GBrowserIsCompatible()) {
   	 var map = new GMap2(document.getElementById("map")); 
   	 var latlng=new GLatLng(<%=@location.lat%>, <%=@location.lng%>);
	 var content="<span style='width:180px'><h4><%= @location.name %></h4><p style='width:180px'><%= @location.address %></p></span>";
	var icon = new GIcon();
                icon.image = "http://labs.google.com/ridefinder/images/mm_20_red.png";
                icon.shadow = "http://labs.google.com/ridefinder/images/mm_20_shadow.png";
                icon.iconSize = new GSize(12, 20);
                icon.shadowSize = new GSize(22, 20);
                icon.iconAnchor = new GPoint(6, 20);
                icon.infoWindowAnchor = new GPoint(5, 1)
   	 map.setCenter(latlng,13); 
   	 map.addControl(new GLargeMapControl());
   	 var marker = new GMarker(latlng,icon); 
   	 map.addOverlay(marker);
     map.enableDoubleClickZoom();
     map.enableScrollWheelZoom();
	 marker.openInfoWindowHtml(content);
	}
}
window.onload=initialize; window.onunload=GUnload;

</script>
<%- end -%>