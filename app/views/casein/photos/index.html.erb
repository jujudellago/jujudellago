<!-- Scaffolding generated by Casein v.3.1.7 -->



<%#= render :partial => 'casein/photos/table', :locals => { :photos => @photos } %>

<!-- Scaffolding generated by Casein v.3.1.7 -->
<div id="photos_table">
<%= render "photos" %>
</div>

<%= content_for :control_bar do %>
<%= link_to "#{casein_show_icon "add"}Add a new photo".html_safe, new_casein_gallery_photo_path(@gallery),:class=>'button_link' %>
<%= link_to "#{casein_show_icon "add"} import uploaded photos".html_safe, import_casein_gallery_photos_path(@gallery) ,:class=>'button_link'%>

	<%= link_to( "Back to gallery", casein_gallery_path(@gallery),:class=>'button_link').html_safe %>
<%- end -%>

<% content_for :head_js do %>

  <%= javascript_tag do %>
$(document).ready(function() {
     $('#photos_editor_container').sortable({
         // axis: 'y', 
         // dropOnEmpty: false, 
         //handle: '.handle'
         cursor: 'move',
         items: 'li',
          opacity: 0.4,
          scroll: true,
         update: function(){
           $.ajax({
               type: 'post', 
               data: $('#photos_editor_container').sortable('serialize') + '&id=<%=@gallery.id-%>', 
               dataType: 'script', 
               complete: function(request){
                   $('#photos_editor_container').effect('highlight');
                 },
               url: '/casein/galleries/<%= @gallery.id %>/sort'});
           }
       });
});
    <% end %>
  
<% end %>